const _0x53f2ee=_0x3d21;(function(_0x29aa29,_0x571adb){const _0x2b3641=_0x3d21,_0x583a38=_0x29aa29();while(!![]){try{const _0x3abe2b=parseInt(_0x2b3641(0x1f2))/0x1*(-parseInt(_0x2b3641(0x189))/0x2)+parseInt(_0x2b3641(0x1d7))/0x3*(parseInt(_0x2b3641(0x1c7))/0x4)+-parseInt(_0x2b3641(0x1c5))/0x5*(-parseInt(_0x2b3641(0x19a))/0x6)+-parseInt(_0x2b3641(0x188))/0x7+-parseInt(_0x2b3641(0x1a7))/0x8+-parseInt(_0x2b3641(0x1b6))/0x9+-parseInt(_0x2b3641(0x1ab))/0xa*(-parseInt(_0x2b3641(0x1db))/0xb);if(_0x3abe2b===_0x571adb)break;else _0x583a38['push'](_0x583a38['shift']());}catch(_0x5bd99b){_0x583a38['push'](_0x583a38['shift']());}}}(_0x425a,0x18ba6));let mymap=L[_0x53f2ee(0x19e)](_0x53f2ee(0x1ce))['setView']([-27.46977,153.025131],0xb);var osm=L[_0x53f2ee(0x1be)]('https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png',{'attribution':'&copy;\x20<a\x20href=\x22https://stadiamaps.com/\x22>Stadia\x20Maps</a>,\x20&copy;\x20<a\x20href=\x22http://openstreetmap.org\x22>OpenStreetMap</a>\x20contributors'})[_0x53f2ee(0x1b5)](mymap),baseMaps={'OpenStreetMap':osm};let geoData_state,pointLayers,stopMap,cMarker,layerControl=L[_0x53f2ee(0x1e8)][_0x53f2ee(0x1a4)](baseMaps,null,{'collapsed':!![]});var focused_trip=null,sliderControlEnable=![],path,sliderControl=null;function _0x425a(){const _0x366cd4=['addOverlay','click','isArray','BCC','addEventListener','addTo','1699587HzjRtu','lat','createElement','route_id','checkbox','circle1late','stop_data','options','tileLayer','updated','circle1mid','stringify','alt','bindPopup','coordinates','878315bXpVGL','forEach','6992tdPNqT','then','resolve','stop_updated','appendChild','ajax','removeControl','mapid','stop_shp','orange','properties','greenyellow','getElementById','clearLayers','value','traj_shp','258kiuCIo','style=\x22width:\x20','assign','</td>\x20\x20\x20\x20\x20\x20</tr>\x20\x20</table>','11YhmrYL','label','trip_id','speed_sms','data','timestamp_dt','atan2','length','iconOptions','geojson_data','includes','log','longitude','control','circle\x20','type','sourceTarget','checked','stop_id','markers','createTextNode','toFixed','arrowCircle','86FEUapP','arrival_delay','application/json;\x20charset=utf-8','checkboxRoutes','push','</td>\x20\x20\x20\x20\x20\x20</tr>\x20\x20\x20\x20\x20\x20<th\x20class=\x22popup-table-header\x22>Arrival\x20Delay:</th>\x20\x20\x20\x20\x20\x20<td\x20name=\x22route-id\x22\x20id=\x22route-id\x22\x20class=\x22popup-table-data\x22>','values','<p\x20name=\x22trip-id\x22\x20id=\x22trip-id\x22\x20class=\x22clearable\x22>','setOpacity','<span\x20class=\x22','665007AzPgHP','3046WePHGB','removeLayer','routes','POST','</p>\x20\x20\x20\x20\x20\x20<table\x20class=\x22popup-table\x22\x20id=\x22table-vals\x22>\x20\x20\x20\x20\x20\x20<tr\x20class=\x22popup-table-row\x22>\x20\x20\x20\x20\x20\x20<th\x20class=\x22popup-table-header\x22>Datetime:</th>\x20\x20\x20\x20\x20\x20<td\x20name=\x22time-dt\x22\x20id=\x22time-dt\x22\x20class=\x22popup-table-data\x22>','indexOf','marker','timestamp','geometry','pop','shift','latitude','Train\x20TripID\x20','circle1','Ferry\x20TripID\x20','input','message','6JPjEML','Bus\x20','geoJson','checkedboxRoutes','map','features','delay','getLatLng','</td>\x20\x20\x20\x20\x20\x20</tr>\x20\x20\x20\x20\x20\x20<tr\x20class=\x22popup-table-row\x22>\x20\x20\x20\x20\x20\x20<th\x20class=\x22popup-table-header\x22>Route\x20ID:</th>\x20\x20\x20\x20\x20\x20<td\x20name=\x22route-id\x22\x20id=\x22route-id\x22\x20class=\x22popup-table-data\x22>','toLocaleString','layers','em;\x20height:\x20','getElementsByName','1395136mGkFJj','keys','</td>\x20\x20\x20\x20\x20\x20</tr>\x20\x20\x20\x20\x20\x20<tr\x20class=\x22popup-table-row\x22>\x20\x20\x20\x20\x20\x20<th\x20class=\x22popup-table-header\x22>Stop\x20ID:</th>\x20\x20\x20\x20\x20\x20<td\x20name=\x22route-id\x22\x20id=\x22route-id\x22\x20class=\x22popup-table-data\x22>','filter','3645090fYwGia','from','getPopup','\x20mins','parse'];_0x425a=function(){return _0x366cd4;};return _0x425a();}function bearing(_0x2c648d,_0x4feda2){const _0x306211=_0x53f2ee;let _0x5df4e2=Math[_0x306211(0x1e1)](_0x4feda2[0x1]-_0x2c648d[0x1],_0x4feda2[0x0]-_0x2c648d[0x0]);return _0x5df4e2*=0xb4/Math['PI'],_0x5df4e2;}let buses={},schedules={};function updateCircleMarkerOptions(_0x5c6f1c,_0x13d5a9){const _0x559ac3=_0x53f2ee;var _0x840c31=_0x5c6f1c['getLatLng'](),_0x5b2733=_0x5c6f1c[_0x559ac3(0x1ad)](),_0x1e356a=_0x5c6f1c['options'][_0x559ac3(0x1e3)];return mymap[_0x559ac3(0x18a)](_0x5c6f1c),_0x5c6f1c=L['marker'][_0x559ac3(0x1f1)](_0x840c31,{..._0x5c6f1c[_0x559ac3(0x1bd)],'iconOptions':Object[_0x559ac3(0x1d9)]({},_0x1e356a,{'rotation':bearing(_0x840c31,_0x13d5a9)})})[_0x559ac3(0x1c3)](_0x5b2733)[_0x559ac3(0x1b5)](mymap),_0x5c6f1c;}function onMapClick(_0xc4b423){const _0x1e485d=_0x53f2ee;Object[_0x1e485d(0x1a8)](buses)[_0x1e485d(0x1aa)](_0x1f498f=>_0x1f498f!==focused_trip)[_0x1e485d(0x19e)](_0x39c89d=>buses[_0x39c89d][_0x1e485d(0x1ee)][0x0][_0x1e485d(0x186)](0x1)),liveFilter(HFBs);path&&mymap['removeLayer'](path);sliderControlEnable&&(mymap[_0x1e485d(0x1cd)](sliderControl),sliderControlEnable=![]);;focused_trip=null;}mymap['on'](_0x53f2ee(0x1b1),onMapClick);var options=(_0x219ee1,_0x18692e,_0x4ade4b)=>{const _0x8ca385=_0x53f2ee;_0x219ee1={..._0x219ee1,'delay':_0x18692e};if(_0x219ee1[_0x8ca385(0x1dd)]['includes']('QR'))return L[_0x8ca385(0x18f)]([_0x219ee1[_0x8ca385(0x194)],_0x219ee1[_0x8ca385(0x1e7)]],{'title':_0x8ca385(0x195)+_0x219ee1[_0x8ca385(0x1dd)],'clickable':!![],'draggable':![],'icon':trainIcon,'alt':_0x219ee1})[_0x8ca385(0x1c3)](popUpContent(_0x219ee1),{'offset':[-0x17,-0x23]});else{if(_0x219ee1[_0x8ca385(0x1dd)][_0x8ca385(0x1e5)](_0x8ca385(0x1b3)))return L[_0x8ca385(0x18f)]([_0x219ee1[_0x8ca385(0x194)],_0x219ee1[_0x8ca385(0x1e7)]],{'title':_0x8ca385(0x197)+_0x219ee1[_0x8ca385(0x1dd)],'clickable':!![],'draggable':![],'icon':ferryIcon,'alt':_0x219ee1})['bindPopup'](popUpContent(_0x219ee1),{'offset':[-0x15,-0x1e]});else{if(_0x18692e<0x96)return circleMarkerText([_0x219ee1[_0x8ca385(0x194)],_0x219ee1['longitude']],_0x219ee1,0.25,0.25,_0x8ca385(0x196),_0x4ade4b)['bindPopup'](popUpContent(_0x219ee1),{'offset':[-0xc,0xa]});else return _0x18692e>0x96&&_0x18692e<0x12c?circleMarkerText([_0x219ee1['latitude'],_0x219ee1[_0x8ca385(0x1e7)]],_0x219ee1,0.25,0.25,_0x8ca385(0x1c0),_0x4ade4b)['bindPopup'](popUpContent(_0x219ee1),{'offset':[-0xc,0xa]}):circleMarkerText([_0x219ee1['latitude'],_0x219ee1['longitude']],_0x219ee1,0.25,0.25,_0x8ca385(0x1bb),_0x4ade4b)['bindPopup'](popUpContent(_0x219ee1),{'offset':[-0xc,0xa]});}}};function removeMarkersTrip(_0x25aecb,_0x2252d0){for(var _0x2356fa=_0x25aecb['length']-0x1;_0x2356fa>-0x1;_0x2356fa--){_0x2252d0['removeLayer'](_0x25aecb[_0x2356fa]);}}var route_splitter=_0x50ee89=>{const _0x10d4e4=_0x53f2ee;return _0x50ee89[_0x10d4e4(0x1b9)]['split']('-')[0x0];};function markers_sender(){const _0x20e9d2=_0x53f2ee;if(focused_trip){let _0x46d2b7=buses[focused_trip],_0x359e8d=[];for(var _0x223762=0x0;_0x223762<_0x46d2b7[_0x20e9d2(0x1e2)];_0x223762++){let _0x3f370c=_0x46d2b7[_0x223762][_0x20e9d2(0x1bd)][_0x20e9d2(0x1c2)];_0x359e8d[_0x20e9d2(0x1f6)](_0x3f370c);}}}function liveFilter(_0x155d0c){const _0x1f09dc=_0x53f2ee;let _0x579d83=[];!Array[_0x1f09dc(0x1b2)](_0x155d0c)?_0x579d83=[_0x155d0c]:_0x579d83=_0x155d0c,request_data=JSON[_0x1f09dc(0x1c1)]({'routes':_0x579d83}),$[_0x1f09dc(0x1cc)]({'url':'/','type':_0x1f09dc(0x18c),'contentType':_0x1f09dc(0x1f4),'data':request_data,'dataSrc':_0x1f09dc(0x19d),'error':function(_0xcceca5){console['log'](_0xcceca5);},'success':function(_0x3dbdc1){const _0x5f3739=_0x1f09dc;mymap['removeLayer'](geoData_state),_0x3dbdc1==''?layerControl[_0x5f3739(0x1d4)]():makeStateMap(_0x3dbdc1);}});}function render_checkboxes_routes(){const _0x397af1=_0x53f2ee;let _0x40f020=document[_0x397af1(0x1d3)](_0x397af1(0x1f5));for(let _0x2370c6=0x0;_0x2370c6<HFBs[_0x397af1(0x1e2)];_0x2370c6++){let _0x2ca95e=document['createElement'](_0x397af1(0x198)),_0x164fe7=document['createElement'](_0x397af1(0x1dc)),_0x56f0f9=document[_0x397af1(0x1b8)]('br');_0x2ca95e[_0x397af1(0x1ea)]=_0x397af1(0x1ba),_0x2ca95e[_0x397af1(0x1d5)]=HFBs[_0x2370c6],_0x2ca95e['name']=_0x397af1(0x18b),_0x40f020[_0x397af1(0x1cb)](_0x2ca95e),_0x40f020[_0x397af1(0x1cb)](_0x164fe7),_0x164fe7[_0x397af1(0x1cb)](document[_0x397af1(0x1ef)](HFBs[_0x2370c6])),_0x40f020['appendChild'](_0x56f0f9);}}const checkedBoxRoutes=document[_0x53f2ee(0x1d3)](_0x53f2ee(0x1f5));let selectedRoutes=[];function makeStateMap(_0x48afb4){const _0x34ee42=_0x53f2ee;traj_shp=_0x48afb4['traj_shp'],stop_shp=_0x48afb4[_0x34ee42(0x1cf)];let _0x55d312=JSON['parse'](traj_shp),_0x1dcc3f=JSON[_0x34ee42(0x1af)](stop_shp);stopMap[_0x34ee42(0x1d4)](),layerControl['removeLayer'](geoData_state),layerControl[_0x34ee42(0x18a)](stopMap),geoData_state=new L[(_0x34ee42(0x19c))](_0x55d312,{'style':newStyle,'pointToLayer':handlePoint,'onEachFeature':handleFeature})[_0x34ee42(0x1b5)](mymap),stopMap=new L[(_0x34ee42(0x19c))](_0x1dcc3f,{'style':handleStyle,'pointToLayer':handlePoint,'onEachFeature':handleFeature})[_0x34ee42(0x1b5)](mymap),layerControl[_0x34ee42(0x1b0)](geoData_state,_0x34ee42(0x1e4)),layerControl[_0x34ee42(0x1b0)](stopMap,_0x34ee42(0x1bc));}function toggle(_0x10c07d){const _0x26a731=_0x53f2ee;let _0x3d888d=document[_0x26a731(0x1a6)](_0x26a731(0x18b));for(let _0x43edad=0x0;_0x43edad<_0x3d888d[_0x26a731(0x1e2)];_0x43edad++){_0x3d888d[_0x43edad][_0x26a731(0x1ec)]=_0x10c07d[_0x26a731(0x1ec)];}}var popUpContent=_0x22c016=>{const _0x53f779=_0x53f2ee;var _0xb640c5=new Date(_0x22c016[_0x53f779(0x1e0)]),_0x40002b=(_0x22c016[_0x53f779(0x1a0)]/0x3c)[_0x53f779(0x1f0)](0x1),_0x528089;return _0x40002b<0x1||_0x40002b>-0x1?_0x528089=_0x40002b+'\x20min':_0x528089=_0x40002b+_0x53f779(0x1ae),_0x53f779(0x185)+_0x22c016[_0x53f779(0x1dd)]+_0x53f779(0x18d)+_0xb640c5[_0x53f779(0x1a3)]()+'</td>\x20\x20\x20\x20\x20\x20</tr>\x20\x20\x20\x20\x20\x20<tr\x20class=\x22popup-table-row\x22>\x20\x20\x20\x20\x20\x20<th\x20class=\x22popup-table-header\x22>Timestamp:</th>\x20\x20\x20\x20\x20\x20<td\x20name=\x22route-id\x22\x20id=\x22route-id\x22\x20class=\x22popup-table-data\x22>'+_0x22c016[_0x53f779(0x190)]+_0x53f779(0x1a2)+_0x22c016['route_id']+_0x53f779(0x1a9)+_0x22c016[_0x53f779(0x1ed)]+_0x53f779(0x1f7)+_0x528089+_0x53f779(0x1da);};function _0x3d21(_0x33eff5,_0x31a262){const _0x425a1f=_0x425a();return _0x3d21=function(_0x3d210f,_0x51ca3c){_0x3d210f=_0x3d210f-0x185;let _0x583e47=_0x425a1f[_0x3d210f];return _0x583e47;},_0x3d21(_0x33eff5,_0x31a262);}function circleMarkerText(_0x3835e7,_0xccb3e0,_0x3288ab,_0x152b90,_0x141ac0,_0x34e5a8){const _0x136366=_0x53f2ee;let _0x53aef2=changeIcon(_0xccb3e0,_0x3288ab,_0x152b90,_0x141ac0,_0x34e5a8),_0x32e626=route_splitter(_0xccb3e0);var _0x4b85a6=L[_0x136366(0x18f)]['arrowCircle'](_0x3835e7,{'iconOptions':_0x53aef2,'title':_0x136366(0x19b)+_0x32e626,'clickable':!![],'draggable':![],'alt':_0xccb3e0});return focused_trip!==null&&_0xccb3e0[_0x136366(0x1dd)]!==focused_trip&&_0x4b85a6[_0x136366(0x186)](0.35),_0x4b85a6['on'](_0x136366(0x1b1),markerOnClick),_0x4b85a6;}function changeIcon(_0x2b8a36,_0x47b9ef,_0x2ec6cf,_0x20b34f,_0x15769a){const _0x5b2a2d=_0x53f2ee;var _0x1406fb=_0x47b9ef*0x2,_0x1b07a6=_0x5b2a2d(0x1d8)+_0x1406fb+_0x5b2a2d(0x1a5)+_0x1406fb+'em;\x20border-width:\x20'+_0x2ec6cf+'em;\x22',_0xf8e65d=_0x1406fb+_0x2ec6cf*0x96,_0x5013ca=route_splitter(_0x2b8a36),_0x3269ee=_0x5b2a2d(0x187)+_0x5b2a2d(0x1e9)+_0x20b34f+'\x22\x20'+_0x1b07a6+'>'+_0x5013ca+'</span>';let _0x36e9e1;if(_0x20b34f==_0x5b2a2d(0x196))_0x36e9e1=_0x5b2a2d(0x1d2);else _0x20b34f=='circle1mid'?_0x36e9e1=_0x5b2a2d(0x1d0):_0x36e9e1='red';return{'color':_0x36e9e1,'size':_0xf8e65d,'html':_0x3269ee,'rotation':_0x15769a,'route_id':_0x5013ca,'obj_detail':_0x2b8a36};}var markerOnClick=_0x5c82c6=>{const _0x548f72=_0x53f2ee;console['log'](_0x5c82c6[_0x548f72(0x1eb)]['options']);let _0x23e49c=_0x5c82c6[_0x548f72(0x1eb)][_0x548f72(0x1bd)][_0x548f72(0x1c2)];var _0x42876f=route_splitter(_0x23e49c);focused_trip=_0x23e49c[_0x548f72(0x1dd)],Object[_0x548f72(0x1a8)](buses)[_0x548f72(0x1aa)](_0x1765b2=>_0x1765b2!==_0x23e49c[_0x548f72(0x1dd)])[_0x548f72(0x19e)](_0x2ed559=>buses[_0x2ed559][_0x548f72(0x1ee)][0x0][_0x548f72(0x186)](0.35)),HFBs[_0x548f72(0x1e5)](_0x42876f)&&liveFilter(_0x42876f);};function render_trajectory(_0x13857a){const _0x5abf4e=_0x53f2ee;traj_shp=_0x13857a[_0x5abf4e(0x1d6)],stop_shp=_0x13857a[_0x5abf4e(0x1cf)];var _0x130c26=JSON[_0x5abf4e(0x1af)](traj_shp),_0x410c1e=JSON[_0x5abf4e(0x1af)](stop_shp);properties=[],geoData_state=new L[(_0x5abf4e(0x19c))](_0x130c26,{'style':handleStyle,'pointToLayer':handlePoint,'onEachFeature':handleFeature})['addTo'](mymap),layerControl['addOverlay'](geoData_state,_0x5abf4e(0x1e4)),stopMap=new L[(_0x5abf4e(0x19c))](_0x410c1e,{'style':handleStyle,'pointToLayer':handlePoint,'onEachFeature':handleFeature})[_0x5abf4e(0x1b5)](mymap),layerControl['addOverlay'](stopMap,_0x5abf4e(0x1bc)),layerControl['addTo'](mymap);if(_0x130c26[_0x5abf4e(0x19f)][_0x5abf4e(0x1e2)]>0x0){var _0x1e8a0f=[];_0x130c26[_0x5abf4e(0x19f)][_0x5abf4e(0x1c6)](_0x54a204=>_0x1e8a0f['push'](_0x54a204[_0x5abf4e(0x1d1)]['time']));}}var source=new EventSource('/gtfs_data');source[_0x53f2ee(0x1b4)](_0x53f2ee(0x199),function(_0x45d88b){const _0x5cf9b9=_0x53f2ee;obj=JSON[_0x5cf9b9(0x1af)](_0x45d88b[_0x5cf9b9(0x1df)]),data_length=Object[_0x5cf9b9(0x1a8)](obj)[_0x5cf9b9(0x1e2)];if(data_length==0x10){schedules=obj;let _0x1f5bd7=Object[_0x5cf9b9(0x1f8)](obj[_0x5cf9b9(0x1dd)]),_0x1cff12=Array[_0x5cf9b9(0x1ac)](Object[_0x5cf9b9(0x1a8)](buses)),_0x19efc4=_0x1cff12[_0x5cf9b9(0x1aa)](_0x2d65d6=>!_0x1f5bd7[_0x5cf9b9(0x1e5)](_0x2d65d6));_0x19efc4['forEach'](_0x9632e7=>{const _0xae516c=_0x5cf9b9;try{if(!HFBs[_0xae516c(0x1e5)](route_splitter(buses[_0x9632e7]['markers'][0x0][_0xae516c(0x1bd)][_0xae516c(0x1c2)])))removeMarkersTrip(buses[_0x9632e7][_0xae516c(0x1ee)],mymap),delete buses[_0x9632e7];else{var _0xf5058b=buses[_0x9632e7][_0xae516c(0x1ee)][_0xae516c(0x19e)](_0x13d09e=>_0x13d09e[_0xae516c(0x1bd)]['alt'][_0xae516c(0x1ed)]);_0xf5058b=[...new Set(_0xf5058b)];var _0x4de985=buses[_0x9632e7][_0xae516c(0x1ca)];buses[_0x9632e7]['updated']&&_0xf5058b[0x0]===_0x4de985&&(removeMarkersTrip(buses[_0x9632e7]['markers'],mymap),delete buses[_0x9632e7]);}}catch(_0x3db923){console[_0xae516c(0x1e6)](_0x9632e7),console['log'](buses[_0x9632e7][_0xae516c(0x1ee)][0x0][_0xae516c(0x1bd)][_0xae516c(0x1c2)]);}});let _0x12e8aa=Object[_0x5cf9b9(0x1f8)](obj[_0x5cf9b9(0x1f3)]),_0x43980f=Object[_0x5cf9b9(0x1f8)](obj[_0x5cf9b9(0x1ed)]);Object[_0x5cf9b9(0x1a8)](buses)[_0x5cf9b9(0x1c6)](_0x49bfd2=>{const _0x43ee5c=_0x5cf9b9;_0x1f5bd7[_0x43ee5c(0x1e5)](_0x49bfd2)&&(buses[_0x49bfd2][_0x43ee5c(0x1a0)]=_0x12e8aa[_0x1f5bd7[_0x43ee5c(0x18e)](_0x49bfd2)],buses[_0x49bfd2][_0x43ee5c(0x1ca)]=_0x43980f[_0x1f5bd7['indexOf'](_0x49bfd2)]);});}else{if(obj['latitude']!==null&&obj[_0x5cf9b9(0x1e7)]!==null){if(!(obj[_0x5cf9b9(0x1dd)]in buses)){let _0x296a08=[],_0x57b8fb=options(obj,0x0,0x0)[_0x5cf9b9(0x1b5)](mymap);_0x296a08[_0x5cf9b9(0x1f6)](_0x57b8fb),buses[obj[_0x5cf9b9(0x1dd)]]={'markers':_0x296a08,'updated':!![]};}else{let _0x7e2dd2=buses[obj[_0x5cf9b9(0x1dd)]][_0x5cf9b9(0x1ee)],_0x1ff147=buses[obj['trip_id']]['updated'],_0xe2a99=0x0;if(_0x5cf9b9(0x1a0)in buses[obj[_0x5cf9b9(0x1dd)]])_0xe2a99=buses[obj[_0x5cf9b9(0x1dd)]]['delay'];let _0x265199=_0x7e2dd2[_0x5cf9b9(0x19e)](_0x88011e=>_0x88011e['options'][_0x5cf9b9(0x1c2)][_0x5cf9b9(0x194)]),_0x293a23=_0x7e2dd2[_0x5cf9b9(0x19e)](_0x13cf5c=>_0x13cf5c[_0x5cf9b9(0x1bd)][_0x5cf9b9(0x1c2)][_0x5cf9b9(0x1e7)]);if(_0x265199[_0x5cf9b9(0x18e)](parseFloat(obj['latitude']))==-0x1&&_0x293a23[_0x5cf9b9(0x18e)](parseFloat(obj['longitude']))==-0x1){let _0x7cc151=bearing(buses[obj['trip_id']][_0x5cf9b9(0x1ee)][0x0][_0x5cf9b9(0x1a1)](),[obj[_0x5cf9b9(0x194)],obj['longitude']]),_0x3e7f14=options(obj,_0xe2a99,_0x7cc151);_0x7e2dd2[_0x5cf9b9(0x1f6)](_0x3e7f14);let _0x1ff709=route_splitter(obj);if(HFBs['indexOf'](_0x1ff709)!==-0x1){if(_0x7e2dd2['length']<0x3)buses[obj['trip_id']]['markers'][0x0]=updateCircleMarkerOptions(buses[obj[_0x5cf9b9(0x1dd)]][_0x5cf9b9(0x1ee)][0x0],[obj[_0x5cf9b9(0x194)],obj[_0x5cf9b9(0x1e7)]]),buses[obj[_0x5cf9b9(0x1dd)]][_0x5cf9b9(0x1ee)]=_0x7e2dd2;else{if(!_0x1ff147)buses[obj[_0x5cf9b9(0x1dd)]][_0x5cf9b9(0x1ee)]=_0x7e2dd2;else{removeMarkersTrip(_0x7e2dd2,mymap);let _0x2773b1=_0x7e2dd2[0x0];var _0x259a6f=_0x7e2dd2[_0x5cf9b9(0x19e)](_0x22678b=>_0x22678b[_0x5cf9b9(0x1bd)]['alt']);buses[obj[_0x5cf9b9(0x1dd)]][_0x5cf9b9(0x1ee)]=[_0x7e2dd2[_0x5cf9b9(0x192)]()],buses[obj[_0x5cf9b9(0x1dd)]][_0x5cf9b9(0x1bf)]=![],request_data=JSON[_0x5cf9b9(0x1c1)]({'markers':_0x259a6f}),$[_0x5cf9b9(0x1cc)]({'url':'/','type':_0x5cf9b9(0x18c),'contentType':_0x5cf9b9(0x1f4),'data':request_data,'dataSrc':'slideBuses','error':function(_0x239cc2){const _0xa38bb7=_0x5cf9b9;if(_0x2773b1)mymap[_0xa38bb7(0x18a)](_0x2773b1);buses[obj[_0xa38bb7(0x1dd)]][_0xa38bb7(0x1bf)]=!![];},'success':function(_0x6e7255){const _0x43597c=_0x5cf9b9;if(_0x2773b1)mymap[_0x43597c(0x18a)](_0x2773b1);let _0x253614=JSON[_0x43597c(0x1af)](_0x6e7255[_0x43597c(0x19f)]),_0xb943ce=_0x253614['features'][0x0][_0x43597c(0x1d1)][_0x43597c(0x1dd)];if(_0x43597c(0x1de)in _0x253614[_0x43597c(0x19f)][0x0][_0x43597c(0x1d1)]&&_0xb943ce in buses){let _0x1e83a2=_0x253614['features'],_0x38d0f3=[_0x2773b1],_0x3cce78=_0x1e83a2[_0x43597c(0x1e2)],_0x578715=0x708/_0x3cce78>0xbb8?0xbb8:0x708/_0x3cce78,_0x9211bb=0x1;var _0x42e120=function(){return new Promise(function(_0x4e0b66){const _0x493f6c=_0x3d21;var _0x5ce4fe=Promise[_0x493f6c(0x1c9)](),_0x465fd=function(){const _0x1fef28=_0x493f6c;var _0x5877af=_0x1e83a2[_0x1fef28(0x193)]();_0x2773b1&&mymap[_0x1fef28(0x18a)](_0x2773b1);if(_0x2773b1['getLatLng']()[_0x1fef28(0x1b7)]!=_0x5877af[_0x1fef28(0x191)][_0x1fef28(0x1c4)][0x1]||_0x2773b1['getLatLng']()['long']!=_0x5877af['geometry'][_0x1fef28(0x1c4)][0x0]){var _0x4d2f6d=bearing(_0x2773b1[_0x1fef28(0x1a1)](),[_0x5877af[_0x1fef28(0x191)]['coordinates'][0x1],_0x5877af['geometry'][_0x1fef28(0x1c4)][0x0]]);_0x2773b1=circleMarkerText([_0x5877af[_0x1fef28(0x191)][_0x1fef28(0x1c4)][0x1],_0x5877af[_0x1fef28(0x191)][_0x1fef28(0x1c4)][0x0]],_0x5877af[_0x1fef28(0x1d1)],0.25,0.25,_0x1fef28(0x196),_0x4d2f6d),_0x2773b1[_0x1fef28(0x1b5)](mymap)['bindPopup'](pointPopUp(_0x5877af[_0x1fef28(0x1d1)])),_0x38d0f3[_0x1fef28(0x1f6)](_0x5877af);}if(++_0x9211bb<_0x3cce78)_0x5ce4fe=_0x5ce4fe[_0x1fef28(0x1c8)](function(){return new Promise(function(_0x1d03e7){setTimeout(function(){_0x1d03e7(),_0x465fd();},_0x578715);});});else{if(_0x2773b1)mymap['removeLayer'](_0x2773b1);_0x4e0b66();}};_0x465fd();});};_0x42e120()['then'](function(){const _0x5796bd=_0x43597c;try{var _0x4193fe=buses[_0xb943ce][_0x5796bd(0x1ee)][0x0];_0x4193fe[_0x5796bd(0x1b5)](mymap),buses[_0xb943ce]['updated']=!![];}catch(_0x15cc6b){console[_0x5796bd(0x1e6)](_0x15cc6b),console[_0x5796bd(0x1e6)](_0xb943ce);}});}else{if(_0x2773b1)mymap[_0x43597c(0x18a)](_0x2773b1);buses[_0xb943ce][_0x43597c(0x1bf)]=!![];}}});}}}else{removeMarkersTrip(_0x7e2dd2,mymap),_0x3e7f14['addTo'](mymap);if(_0x7e2dd2[_0x5cf9b9(0x1e2)]<0x3&&!(obj[_0x5cf9b9(0x1dd)][_0x5cf9b9(0x1e5)]('QR')|obj[_0x5cf9b9(0x1dd)]['includes'](_0x5cf9b9(0x1b3))))buses[obj[_0x5cf9b9(0x1dd)]][_0x5cf9b9(0x1ee)][0x0]=updateCircleMarkerOptions(buses[obj[_0x5cf9b9(0x1dd)]][_0x5cf9b9(0x1ee)][0x0],[obj['latitude'],obj[_0x5cf9b9(0x1e7)]]);if(_0x7e2dd2['length']>=0x3)_0x7e2dd2[_0x5cf9b9(0x193)]();buses[obj[_0x5cf9b9(0x1dd)]][_0x5cf9b9(0x1ee)]=_0x7e2dd2,buses[obj[_0x5cf9b9(0x1dd)]][_0x5cf9b9(0x1bf)]=!![];}}}}}},![]);